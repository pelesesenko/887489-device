var mapModal=document.querySelector(".modal-map"),mapOpen=document.querySelector(".open-map"),mapClose=mapModal.querySelector(".modal-map .modal-close"),feedbackModal=document.querySelector(".feedback-modal"),feedbackOpen=document.querySelector(".btn-open-form"),feedbackClose=feedbackModal.querySelector(".feedback-modal .modal-close"),feedbackSubmit=feedbackModal.querySelector("[type=submit]"),feedbackLogin=feedbackModal.querySelector("[name=login]"),feedbackEmail=feedbackModal.querySelector("[name=email]"),feedbackTxtArea=feedbackModal.querySelector("[name=mail-text]"),overlay=document.querySelector(".overlay"),isStorageSupport=!0,storageLogin="",storageEmail="";try{storageLogin=localStorage.getItem("login"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}window.addEventListener("keydown",function(e){27==e.keyCode&&(mapModal.classList.contains("modal-show")&&(e.preventDefault(),mapModal.classList.remove("modal-show"),overlay.style.display=""),feedbackModal.classList.contains("modal-show")&&(e.preventDefault(),feedbackModal.classList.remove("modal-error"),feedbackModal.classList.remove("modal-show"),overlay.style.display=""))}),mapOpen.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("modal-show"),overlay.style.display="block"}),feedbackOpen.addEventListener("click",function(e){e.preventDefault(),feedbackModal.classList.add("modal-show"),overlay.style.display="block",storageLogin?(feedbackLogin.value=storageLogin,feedbackEmail.focus(),storageEmail&&(feedbackEmail.value=storageEmail,feedbackTxtArea.focus())):feedbackLogin.focus()}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal-show"),overlay.style.display=""}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),feedbackModal.classList.remove("modal-show"),feedbackModal.classList.remove("modal-error"),overlay.style.display=""}),feedbackSubmit.addEventListener("click",function(e){feedbackLogin.value&&feedbackEmail.value?isStorageSupport&&(localStorage.setItem("feedbackLogin",feedbackLogin.value),localStorage.setItem("feedbackEmail",feedbackEmail.value)):(e.preventDefault(),feedbackModal.classList.remove("modal-error"),feedbackModal.offsetWidth=feedbackModal.offsetWidth,feedbackModal.classList.add("modal-error"),feedbackLogin.style.backgroundColor="#f6dada",feedbackLogin.value||(feedbackLogin.style.backgroundColor="#f6dada"),feedbackEmail.value||(feedbackEmail.style.backgroundColor="#f6dada"))});